---
layout: post
title: 4.修改activity
date: 2024-05-14 23:18 +0800
last_modified_at: 2024-05-14 01:08:25 +0800
tags:
  - 安卓逆向
toc: true
---
# 1.了解安卓四大组件、Activity生命周期

| 组件                        | 描述                                                                                                                                         |
| :------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------ |
| Activity                  | 在应用中的一个Activity可以用来表示一个界面，意思可以理解为“活动”，即一个活动开始，代表Activity组件启动，活动结束，代表一个Activity的生命周期结束。一个Android应用必须通过Activity来运行和启动，Activity的生命周期交给系统统一管理。 |
| Service                   | Service它可以在后天执行长时间运行操作而没有用户界面的应用组件，不依赖任何用户界面，例如后台播放音乐，后台下载文件等。                                                                             |
| Broadcast Receiver（广播接收器） | 一个用于接收广播信息，并做出对应处理的组件。比如我们常见的系统广播：通知时区改变、电量低、用户改变了语言选项等。                                                                                   |
| Content Provider(内容提供者)   | 作为应用程序之间唯一共享数据的途径，Content Provider主要的功能就是存储并检索数据以及向其他应用程序提供访问数据的接口。Android内置的许多数据都是使用Content Provider形式，供开发者调用的（如视频，音频，图片，通讯录等）            |
## 1.1 activity的切换

1.声明实现应用部分可视化界面的Activity，必须使用AndroidManifest中的activity元素表示所有Activity,系统不会识别和运行未进行任何声明的Activity.
2.android:exported="true" --当前Activity是否可以被另一个application的组件启动：true允许被启动，false不允许被启动
3.intent-filter--指明这个activity可以以什么样的意图（intent）启动
4.action--表示activity作为一个什么动作启动，android.intent.action.MAIN 表示作为主activity启动
5.category--这是action元素的额外类别信息，android.intent.category.LAUNCHER表示这个activity为当前应用程序优先级最高的Activity

## 1.2 activity的生命周期
| 函数名称        | 描述                                                                               |
| :---------- | -------------------------------------------------------------------------------- |
| onCreate()  | 一个Activity启动后第一个被调用的函数，常用来在此方法中进行Activity的一些初始化操作。例如创建View,绑定数据，注册监听，加载参数等。      |
| onStart()   | 当Activity显示在屏幕上时，此方法被调用但此时还无法进行与用户的交互操作。                                         |
| onResume()  | 这个方法在onStart()之后调用，也就是在Activity准备好与用户进行交互的时候调用，此时的Activity一定位于Activity栈顶，处于运行状态。 |
| onPause()   | 这个方法是在系统准备去启动或者恢复另外一个Activity的时候调用，通常在这个方法中执行一些释放资源的方法，以及保存一些关键数据。               |
| onStop()    | 这个方法是在Activity完全不可见的时候调用的                                                        |
| onDestroy() | 这个方法在Activity销毁之前调用，之后Activity的状态为销毁状态                                           |
| onRestart() | 当Activity从停止stop状态恢复进入start状态时调用状态                                               |
注意：这些都是回调方法，我们不能够去调用，而是只能重写方法里面的内容，什么时候调用是由Activity所决定的。我们能够手动调用的方法只有finish()方法，该方法用于关闭某个Activity.
# 2.弹窗定位、去更新
### 2.1去除以及定位弹窗的方法
1.修改xml中的Versioncode
2.Hook弹窗（推荐算法助手开启弹窗定位）：1.弹窗定位 2.屏蔽关键词弹窗
3.修改dex弹窗代码： 1，修改或者注释掉show方法
4.抓包修改响应体（也可以路由器拦截）
5.横幅广告： xml搜索 1.把宽度或者高度修改为0 2.把布局隐藏起来
# 3.广告分析&布局优化
## 3.1 广告类型
启动广告 弹窗&更新广告 &横幅广告
启动广告流程： 启动Activity->广告Activity->主页Activity
修改方法：1.修改加载时间 2.Activity切换定位，修改Intent的Activity类名。
### 3.2布局优化
1.开发者助手抓布局
2.MT管理器xml搜索定位
3.修改xml代码
`android:visibility= `
