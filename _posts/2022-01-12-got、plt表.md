### 1.   got、plt表介绍

#### 1.GOT表和PLT表

GOT（Global offset Table,全局偏移表）是linux ELF文件中用于定位全局变量和函数的一个表。

PLT(Procedure Linkage Table,过程链接表)是linux ELF文件中用于延迟绑定的表，即函数第一次被调用的时候才进行绑定。

#### 2.延迟绑定

延迟绑定，就是函数第一次被调用的时候才进行绑定（包括符号查找、重定位等），如果函数从来没有用到过就不进行绑定。基于延迟绑定可以大大加快程序的启动速度，特别有利于一些引用了大量函数的程序。

#### 1.   延迟绑定的基本原理

假设存在一个bar函数，这个函数在PLT中的条目为bar@plt,在GOT中的条目为bar@got，那么在第一次调用bar函数的时候，首先会跳转到PLT，伪代码如下：

 Bar@plt:

       Jmp bar@got

       Patch bar@got

这里会从PLT跳转到GOT,如果函数从来没有调用过，那么这时候GOT会跳转回PLT并调用patch bar@got,这一行代码的作用是将bar函数真正的地址填充到bar@got,然后跳转到bar函数真正的地址执行代码，当我们下次再调用bar函数的时候，执行路径就是先后跳转到bar@plt、bar@got、bar真正的地址：

执行调用malloc函数时，会先到malloc@plt中寻找。

![](file:///C:/Users/zhukeyu/AppData/Local/Temp/msohtmlclip1/01/clip_image001.png)

plt表会继续跳入到got表中寻找

![](file:///C:/Users/zhukeyu/AppData/Local/Temp/msohtmlclip1/01/clip_image003.jpg)

Got表中所存放的malloc函数的地址便是在进程中的实际地址。

![](file:///C:/Users/zhukeyu/AppData/Local/Temp/msohtmlclip1/01/clip_image005.jpg)

![](file:///C:/Users/zhukeyu/AppData/Local/Temp/msohtmlclip1/01/clip_image007.jpg)

![](file:///C:/Users/zhukeyu/AppData/Local/Temp/msohtmlclip1/01/clip_image009.jpg)