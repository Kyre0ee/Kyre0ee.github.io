---
layout: post
title: 第二章 计算机性能评价
date: 2019-05-02 15:57 +0800
tags: 计组-MIPS汇编
excerpt: "计算机性能评价学习笔记。"
toc: true
---
# 第二章
***

## 计算机性能评价

### 1. 制造成本 (Manufacturing Cost)

### 2. 衡量计算机性能的基本指标
- **响应时间** 或 **执行时间** 或 **等待时间**
- **吞吐量** 或 **带宽**
- 不同应用场合用户关心的性能不同：
  - **多媒体应用**：要求吞吐率高（音/视频播放要流畅）
  - **事务处理系统**：要求响应时间短（存/取款速度要快）
  - **ATM、文件服务器、Web服务器**：要求吞吐率高且响应时间短

### 3. 计算机性能测量
- **CPI、时钟周期（频率）、程序所含指令条数**
  - **CPI**：每条指令执行的时钟周期数，用来衡量 ISA、实现ISA的技术和组织、算法等方面的综合结果

- **比较计算机性能时，用执行时间来衡量**
  - 完成同样工作量所需时间最短的计算机性能最好
  - 处理器时间往往被多个程序共享使用，因此用户感觉到的程序执行时间并不是程序的真正执行时间
  - 用户感觉到的响应时间分为以下两部分：
    - **CPU时间**：指CPU真正花在程序执行上的时间。又包括两部分：
      - **用户CPU时间**：用来运行用户代码的时间
      - **系统CPU时间**：为了执行用户程序而需要运行操作系统程序的时间
    - **其他时间**：指等待I/O操作完成或CPU花在其他用户程序上的时间

- **系统性能和CPU性能的区别**
  - **系统性能**：指系统响应时间，与CPU外的其他部分也有关系
  - **CPU性能**：用户CPU时间

### 4. CPU执行时间的计算
- **公式**
  - CPU执行时间 = CPU时钟周期数 × 时钟周期
  - CPU执行时间 = CPU时钟周期数 / 时钟频率
  - CPU执行时间 = 指令条数 × CPI × 时钟周期
  - CPU时钟周期数 = 指令条数 × CPI
  - CPI = CPU时钟周期数 / 指令条数
  - CPI = (CPU时间 × 时钟频率) / 指令条数 = 总时钟周期数 / 指令条数

![CPI 公式](https://github.com/Kyre0ee/Kyre0ee.github.io/assets/169347540/d44a304d-91fd-4072-b10c-86599ff17218)
![时钟周期公式](https://github.com/Kyre0ee/Kyre0ee.github.io/assets/169347540/b52230dc-c488-4f59-a2b3-68b26f3d1cc5)

### 5. 指令执行速度 (MIPS、MFLOPS/TFLOPS/PFLOPS)
- **MIPS**：每秒钟执行多少百万条指令 (时钟频率/CPI×10^6)
  - **局限**：不同机器的指令集不同、程序由不同的指令混合而成、指令使用的频度动态变化、不实用
- **MFLOPS**：每秒钟多少百万条浮点数操作
  - **局限**：不一定是程序中花时间的部分

### 6. 基准程序 (Benchmark)
- **用基准程序来评测计算机的性能**
  - 基准测试程序是专门用来进行性能评价的一组程序
  - 不同用户使用的计算机用不同的基准程序
  - 基准程序通过运行实际负载来反映计算机的性能
  - 最好的基准程序是用户实际使用的程序或典型的简单程序

- **基准程序的缺陷**
  - **现象**：基准程序的性能与某段短代码密切相关时，会被利用以得到不当的性能评测结果
  - **手段**：硬件系统设计人员或编译器开发者针对这些代码片段进行特殊优化，使得执行这段代码的速度非常快

- **常见基准程序**
  - **SPEC**
  - **Linpack**：线性系统软件包基准测试程序

## 第二章总结
- **性能的定义**：一般用程序的响应时间或系统的吞吐率表示机器或系统整体性能。
- **CPU性能的测量**（用户程序的CPU执行时间）：
  - 一般把程序的响应时间划分为CPU时间和等待时间，CPU时间又分为用户CPU时间和系统CPU时间。
  - 因为操作系统对自己所花费的时间进行测量时，不十分准确，所以对CPU性能的测算一般通过测算用户CPU时间来进行。

- **各种性能指标之间的关系**
  - CPU执行时间 = CPU时钟周期数 × 时钟周期
  - 时钟周期和时钟频率互为倒数
  - CPU时钟周期数 = 程序指令数 × 每条指令的平均时钟周期数(CPI)

- **MIPS数在有些情况下不能说明问题，不具有可比性**

- **性能评价程序的选择**：
  - 采用一组基准测试程序进行综合（算术平均/加权平均/几何平均）评测
  - 有些制造商会针对评测程序中频繁出现的语句采用专门的编译器，使评测程序的运行效率大幅提高。因此有时基准评测程序也不能说明问题。

- **提高计算机性能的主要途径**（针对某种特定的指令集体系结构）：
  - 提高时钟频率
  - 优化处理器中数据通路的结构以降低CPI
  - 采用编译优化措施来减少指令条数或降低指令复杂度
