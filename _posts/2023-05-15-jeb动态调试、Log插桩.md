---
layout: post
title: 5.jeb动态调试、Log插桩
date: 2023-05-15 23:18 +0800
tags: 安卓逆向
excerpt: "简单记录jeb动态调试步骤"
toc: true
---
# 1.配置java环境
1.下载jdk文件并安装
2.配置java环境
# 2.了解并掌握动态调试
## 2.1 什么是动态调试
动态调试是指自带的调试器跟踪自己软件的运行，可以在调试的过程中知道参数或者局部变量的值以及缕清代码运行的先后顺序，多用于爆破注册码（CTF必备技能）
## 2.2 动态调试步骤
### 1.修改debug权限
方法一：在AndroidManifest.xml里添加可调试权限
`android:debuggable="true"`
方法二：XappDebug模块hook对应的app
`https://github.com/Palatis/XAppDebug`
方法三： Magisk命令（重启失效）
` 1.adb shell #adb进入命令行模式
2. su # 切换至超级用户
3. magisk resetprop ro.debuggable 1
4. stop;start; # 一定要通过该方式重启`
方法四：刷入MagiskHide Props Config模块（永久有效）
一般来说，在4选项中如果有ro.debuggable那就直接修改
没有的话就选5修改ro.debuggable的值为1
### 2.端口转发以及开启adb权限
版本号点击7次开启开发者模式并开启adb调试
夜神模拟器：adb connect 127.0.0.1:62001
### 3.下断点
ctrl + b
### 4.debug模式启动
`adb shell am start -D -n com.zj.wuaipojie/.ui.MainActivity`
adb shell am start -D -n
adb shell am start -D -n 包名/类名
am start -n 表示启动一个activity
am start -D表示将应用设置为可调试模式
### 5.Jeb附加调试进程
快捷键：
F6进入方法
F7从方法中跳出来
F8
R运行到光标处
# 3.了解并掌握log插桩
定义：Log插桩指的是反编译APK文件时，在对应的smali文件里将程序中的关键信息，以log日志的形式进行输出。
调用命令
`invoke-static {对应寄存器}, Lcom/mtools/LogUtils;->v(Ljava/lang/Object;)V`


