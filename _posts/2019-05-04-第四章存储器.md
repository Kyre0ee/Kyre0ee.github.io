---
layout: post
title: 第四章 
date: 2019-05-04 15:57 +0800
tags: 计组-MIPS汇编
toc: true
---
# 第四章 存储器
***
## 1.存储器概述
+ 信息的存储、传送、处理单位的含义
  - 记忆单元/编址单位/存储单位/传输单位/机器字长
  - 基本术语
    * 记忆单元（存储单元/存储元/位元）（cell）--具有两种稳态的能够表示二进制码0和1的物理器件。
    * 存储单元/编址单位（Addressing Unit）--主从中具有相同地址的位构成一个存储单元，也称为一个编址单位
    * 存储体/存储矩阵/存储阵列（Bank）--所有存储单元构成一个存储阵列
    * 编址方式（Addressing Mode）--字节编址、按字编址
    * 存储器地址寄存器（MAR）--用于存放主存单元地址的寄存器
    * 存储器数据寄存器（MDR）--用于存放主从单元中的数据的寄存器
+ 存储器分类
  - 可按存取方式/易失性/可更改性/元器件/功能来分
  - 1.按工作性质/存取方式分类
    * 随机存取存储器（RAM）:每个单元读写时间一样，且与各单元所在位置无关（如内存）。
    * 顺序存取存储器（SAM）:数据按顺序从存储载体的始端读出或写入，因而存取时间的长短与信息所在位置有关（如磁带）。
    * 直接存取存储器（DAM）:直接定位到要读写的数据块，在读写某个数据块时按顺序进行（如磁盘）。
    * 相联存储器（CAM）:按内容检索到存储位置进行读写（如：快表）。
  - 2.按存储介质分类
    * 半导体存储器：双极型，静态MOS型，动态MOS型
    * 磁表面存储器：磁盘、磁带
    * 光存储器：CD、CD-ROM、DVD
  - 3.按信息的可更改性分类
    * 读写存储器：可读可写
    * 只读存储器：只能读不能写
  - 4.按断电后的信息的可保存性分类
    * 非易失性存储器--信息可一直保留，不需要电源维持（如：ROM、磁表面存储器、光存储器等）。
    * 易失性存储器：电源关闭时信息自动丢失。（如RAM、Cache等）
  - 5.按功能/容量/速度/所在位置分类
    * 寄存器（Register）:分装在CPU内，用于存放当前正在执行的指令和使用的数据。用触发器实现，速度快，容量小（几十个）
    * 高速缓存（Cache）:位于CPU内部或附近，用来存放当前要执行的局部程序段和数据。用SRAM实现，速度可与CPU匹配，容量小（几MB）
    * 内存储器MM（主存储器Main(Primary)Memory）:位于CPU外，用来存放已被启动的程序及所用的数据。用DRAM实现，速度较快，容量较大（几GB）
    * 外存储器AM（辅助存储器Auxiliary/Secondary Storage）:位于主机之外，用来存放暂不运行的程序、数据或存档文件。用磁表面或光存储器实现，容量大而速度慢。
      ![image](https://github.com/kyre0e/kyre0e.github.io/assets/169347540/328052ba-5ea8-4524-ab57-2bec5f46dd21)
    * 外存与内存的关系及比较
      - 外存储器：存取速度慢，成本低，容量很大，不与CPU直接连接，先传送到内存，然后才能被CPU使用。属于非易失性存储器，用于长久存放系统中几乎所有信息。
      - 内存储器：存取速度快，成本高，容量较小，直接与CPU连接，CPU对内存中的指令及数据进行读、写操作。属于易失性存储器，用于临时存放正在运行的程序和数据。
+ 主存储器
  - 主存的结构
        问1：主存中存放的是什么信息？CPU何时会访问主存？
        答1：指令及其数据。CPU执行指令时需要取指令、取数据、存数据。
        问2：地址译码器的输入是什么？输出是什么？可寻址范围是多少？
        答2：输入是地址，输出是地址驱动信号（只有一根地址驱动线被选中）。可寻址范围0~2^36-1即主存地址空间为64GB按字节编址时。
        ![image](https://github.com/kyre0e/kyre0e.github.io/assets/169347540/a1dfb30e-3dcf-4ba8-b6fe-d311fe14a065)
        主存地址空间大小不等于主存容量（实际安装的主存大小）！若是字节编址，则每次最多可读/写8个单元，给出的是首（最小）地址。
  - 主存的主要性能指标
    - 按字节连续编址，每个存储单元为1个字节（8位）
    - 存储容量：所包含的存储单元的总数（单位：MB或GB）
    - 存取时间TA：从CPU送出内存单元的地址码开始，到主存读出数据并送到CPU（或者是把CPU数据写入主存）所需要的时间
    - 存取周期TMC:连续两次访问存储器所需的最小时间间隔，它应等于存取时间加上下一存取开始前所要求的附加时间，因此，Tmc比Ta大（因为存储器由于读出放大器、驱动电路等都有一段稳定恢复时间，所以读出后不能立即进行下一次访问）。
## 2.半导体存储器
+ 半导体存储器随机访问存储器
  - 内存由半导体存储芯片组成，芯片由多种类型：
      ![image](https://github.com/kyre0e/kyre0e.github.io/assets/169347540/7ab389ab-2cc7-4fc7-aea8-49a879eb3536)

  - SRAM的原理和特点
    6管静态NMOS记忆单元
    ![image](https://github.com/kyre0e/kyre0e.github.io/assets/169347540/1cbc423d-b10a-4ee1-bfa4-167d4c4acb3b)

    SRAM中数据保存在一对正负反馈门电路中，只要供电，数据就一直保持，不是破坏性读出，也无需重写，即无需刷新。
    信息存储原理：看作带时钟的RS触发器
    
  - DRAM的原理和特点
    动态单管记忆单元电路
    读写原理：字线上加高电平，使T管导通。写0时，数据线加低电平，使Cs上电荷对数据线放电。写1时，数据线加高电平，使数据线对Cs充电。读出时，数据线上有一读出电压。它与Cs上电荷量成正比。
    优点：电路元件少，功耗小，集成度高，用于构建主存存储
    缺点：速度慢、是破坏性读出（需读后再生）、需定时刷新
    刷新：DRAM的一个重要特点是，数据以电荷的形式保存在电容中，电容的放电使得电荷通常只能维持几十个毫秒左右，相当于1M个时钟周期左右，因此要定期进行刷新（读出后重写写回），按行进行（所有芯片中的同一行一起进行），刷新操作所需时间通常只占1%~2%左右。
+ RAM芯片组织
  - 如何由记忆单元构成存储阵列
    存储芯片：存储体+外围电路（地址译码和读写控制）
  - 如何读写存储阵列中的信息
  - 如何由芯片构成存储器
    为什么每出现新一代DRAM芯片，容量至少提高到4倍？
    行地址和列地址分时复用，每出现新一代DRAM芯片，至少要增加一根地址线。每加一根地址线，则行地址和列地址各增加1位，所以行数和列数各增加1倍。因而容量至少提高4倍。
    刷新周期：从上次对整个存储器刷新结束到下次对整个全部刷新一遍为止的时间间隔，也就是相邻两次对某个特定行进行刷新的时间间隔。为电容数据有效保存期的上限10ms~100ms，目前公认是64ms。
    多采用异步刷新方式：将一个刷新周期分配给所有行，使得在一个刷新周期内每行至少刷新一次，且仅刷新一次。
+ 提高存储器速度的措施
  - 芯片内采用行缓存，同行内数据直接从缓存中取
  - 采用多模块存储器，多个存储器交叉存取
  - 引入Cache
## 3.只读存储器ROM
随机存取方式，非易失性
maskrom
prom
EPROM
## 4.主存与CPU的连接
* CPU和主存之间有同步和异步两种通信方式
  - 异步方式（读/写操作）过程（需要握手信号）
    + CPU送地址到地址线，主存进行地址译码
    + CPU发读命令，然后等待存储器发回完成信号
    + 主存收到读命令后开始读数，完成后发完成信号给CPU
    + CPU接收到完成信号，从数据线取数
  - 同步方式的特定
    + CPU和主存由统一时钟信号控制，无需应答信号
    + 主存总是在确定的时间内准备好数据
    + CPU送出地址和读命令后，总是在确定的时间取数据
    + 存储芯片必须支持同步方式
* SDRAM是同步存储芯片
  - 每步操作都在系统时钟控制下进行
  - 有确定的等待时间（读命令开始到数据线有效的时间，称为CAS潜伏期）CL,例如CL = 2clks
  - 连续传送数据个数BL= 1/2/4/8
  - 多体（缓冲器）交叉存取
  - 利用总线时钟上升沿与下降沿同步传送
* 只读存储器
  - 特点
    + 信息只能读不能在线写
    + 非破坏性读出，无需再生
    + 也以随机存取方式工作
    + 信息用特殊方式写入，一经写入，就可长久保留，不受断电影响。故是非易失性存储器
  - 用途
    + 用来存放一些固定程序。如监控程序、启动程序等。只要一接通电源，这些程序就能自动地运行；
    + 可作为控制存储器，存放微程序
    + 还可作为函数发生器和代码转换器
    + 在输入/出设备中，倍
## 5.Cache与程序访问的局部性
## 6.Cache与主存之间的映射方式
## 7.Cache替换算法
## 8.Cache写策略和其他设计问题
## 9.磁盘存储器
## 10.虚拟存储器的引入
## 11.虚拟存储器的实现
# 第四章总结
***
