---
layout: post
title: 第三章 数据链路层
date: 2019-04-03 15:57 +0800
tags: 计算机网络
excerpt: "计算机网络-数据链路层学习笔记。"
toc: true
---
# 1. 数据链路层基础概论

## 1.1 数据链路层概念

数据链路层位于物理层和网络层之间，提供相邻结点之间的可靠数据传输。

## 1.2 帧的概念

- **数据链路层的协议数据单元**
- **组成**：
  - 帧头：源MAC地址、目的MAC地址、类型
    - MAC地址：48位，每个网卡独一无二
  - 数据
  - 帧尾：校验

## 1.3 以太网数据帧中的MAC和LLC

- **以太网帧结构 (Ethernet_II)**：以太网一般通过广播总线型传播
  - D.MAC -- S.MAC -- Type -- Data -- FCS
- **局域网帧结构 (IEEE802.3)**：
  - D.MAC -- S.MAC -- Length -- LLC -- SNAP -- Data -- FCS

### MAC (媒体访问控制)

- 作用：
  - 数据帧的封装和拆封
  - 帧的寻址和识别
  - 帧的接收和发送
  - 链路管理
  - 帧的差错控制

### LLC (逻辑链路控制)

- 作用：
  - 传输可靠性保障和控制
  - 数据报的分段与重组
  - 数据包的顺序传输

### 注解

数据链路层分为上层LLC和下层MAC。MAC主要负责控制和连接物理层的物理介质。

- **发送数据时**：MAC协议判断是否可以发送数据，如果可以，则加上控制信息并发送到物理层。
- **接收数据时**：MAC协议判断输入的信息是否有传输错误，如果没有错误，则去掉控制信息并发送至LLC层。

## 1.4 数据链路层的两种传输方式

- 单播
- 广播

## 1.5 数据链路层的三个基本问题

1. 封装成帧
2. 透明传输
3. 差错检测
   - 奇数校验
   - 偶数校验
   - CRC校验

## 1.6 局域网中的设备

- **集线器 (HUB)**：物理层设备，对接收到的信号进行再生整形放大，扩展网络传输距离，所有节点共享带宽。
- **交换机 (Switch)**：数据链路层设备，为接入交换机的任意两个网络节点提供独享的通信通路，最常见的是以太网交换机，独享带宽。
- **网桥 (Bridge)**：两个端口的交换机，工作在物理层和数据链路层之间。

# 2. 链路层通信协议

## 2.1 冲突域和广播域

- **冲突域**：交换机的每一个端口是一个冲突域，冲突域只发生在一个网段。
- **广播域**：交换机的所有接口都在一个广播域，广播域在一个或多个网段发生。

### 区别

- 冲突域是基于物理层
- 广播域是基于数据链路层

## 2.2 虚拟局域网 (VLAN)

- **VLAN**：将一个物理LAN在逻辑上划分成多个广播域的通信技术。VLAN内的主机端可以直接通信，而VLAN间不能直接通信，从而将广播报文限制在一个VLAN内。

### 优点和目的

1. 划分广播域，减少垃圾数据
2. 增强局域网的安全性
3. 提高网络健壮性
4. 灵活构建工作组

### 划分VLAN的方式

1. 基于端口
   - 给交换机的每个端口配置不同的PVID
   - Access：只允许通过一个VLAN
   - Trunk：允许通过多个VLAN
   - Hybird：混合模式
2. 基于子网
3. 基于MAC地址
4. 基于协议
5. 基于匹配策略

## 2.4 CSMA/CD

- **载波监听多路访问/冲突检测**：一种在广播型信道中使用的随机访问技术，用于检测总线型网络中是否出现传输冲突。

### 四大特点

1. 先听后发
2. 边听边发
3. 冲突检测
4. 延迟后发

## 2.5 PPP (点对点协议)

- 点对点通信是一对一信道，数据传输时出现，实现两端通信协议的封装，单播传输。

## 2.6 CRC (循环冗余校验)

- 通过校验码进行差错检测
  1. 按最高位次数补0
  2. 模2运算
  3. 得到最高次位数的余数

