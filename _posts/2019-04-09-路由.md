---
layout: post
title: 路由
date: 2019-04-09 15:57 +0800
tags: 计算机网络
excerpt: "计算机网络-路由相关知识点"
toc: true
---
## 介绍

路由是计算机网络中用于在不同网络之间传输数据的设备或程序。它根据目标地址选择最佳路径，并将数据包从源主机转发到目标主机。

## 路由器的工作原理

路由器通过维护路由表来确定数据包的下一跳路径。路由表中包含目的网络的网络地址和下一跳路由器的信息。路由器根据数据包的目的地址，在路由表中查找匹配的条目，并将数据包发送到相应的下一跳。

## 路由协议

### 静态路由

静态路由是由管理员手动配置的路由，不会自动更新。管理员需要手动指定目的网络和下一跳路由器的信息。

```markdown
示例：
Router(config)# ip route 192.168.1.0 255.255.255.0 10.0.0.1
动态路由
动态路由是路由器之间自动交换路由信息，根据网络拓扑和路由器间的通信状态自动更新路由表。常见的动态路由协议包括 RIP、OSPF、EIGRP、BGP 等。
```

```markdown
示例：
Router(config)# router ospf 1
Router(config-router)# network 192.168.1.0 0.0.0.255 area 0
```

### 路由器间的通信

路由器之间通过路由协议交换路由信息，建立路由表，并通过路由算法选择最佳路径进行数据转发。常见的路由算法包括距离矢量算法、链路状态算法等。
#### 距离矢量算法（Distance Vector Algorithm）

距离矢量算法是一种分布式路由算法，每个路由器维护一个距离向量，其中包含到达网络的距离及下一跳路由器的信息。路由器周期性地向相邻路由器发送距离向量，并根据收到的距离向量更新自己的路由表。

##### 工作原理

1. 初始化：每个路由器初始化自己的距离向量，将自己到达的网络设置为 0，其他网络设置为无穷大。
2. 距离更新：路由器周期性地向相邻路由器发送自己的距离向量，并接收邻居路由器发送的距离向量。
3. 路由计算：根据收到的距离向量更新自己的路由表，选择最佳路径。
4. 路由更新：如果路由表发生改变，则向相邻路由器发送更新消息。

#### 链路状态算法（Link State Algorithm）

链路状态算法是一种分布式路由算法，每个路由器维护自己到达所有网络的链路状态信息，并通过链路状态广播协议将信息传播到整个网络中，然后使用最短路径算法计算出最佳路径。

##### 工作原理

1. 发现邻居：每个路由器周期性地向相邻路由器发送链路状态信息，并接收相邻路由器发送的信息，从而发现邻居。
2. 构建链路状态数据库：收集网络中所有路由器的链路状态信息，构建链路状态数据库。
3. 计算最短路径：使用最短路径算法（如 Dijkstra 算法）计算出到达目标网络的最短路径。
4. 更新路由表：根据最短路径计算结果更新路由表，选择最佳路径进行数据转发。

### 路由的应用场景

互联网接入：ISP 使用路由器连接用户到互联网。
企业内部网络：企业使用路由器连接不同部门或分支机构的网络。
数据中心网络：数据中心使用路由器将流量路由到不同的服务器或服务。

### 总结
路由是计算机网络中实现不同网络间通信的重要组件，负责选择最佳路径并转发数据包。了解路由的工作原理、常见路由协议以及应用场景对于网络工程师和管理员来说至关重要
